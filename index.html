<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FIT3179 Data Visualisation 2</title>

  <!-- Vega, Vega-Lite, and Embed -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>        <!-- ✅ required -->
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body>
  <h1 class="hero-title">Tokyo Olympics 2020</h1>

  <p class="intro">
    The Tokyo 2020 Olympic Games, held in 2021 due to the global COVID-19 pandemic, marked a historic moment as the first Olympics to take place during such unprecedented circumstances. Despite the restrictions and absence of crowds, the Games brought together thousands of athletes from around the world to compete across a wide range of disciplines. This data visualisation explores key insights from the event — including medal distribution and athlete demographics.
  </p>


  <div class="grid">
    <section>
      <h2>World Medal Distribution</h2>
      <div id="chart3" class="chart"></div>
    </section>

    <section>
      <h2>Top-20 Countries by Total Medals</h2>
      <div id="chart1" class="chart"></div>
    </section>

    <section>
      <div class="medal-controls" id="medal-controls">
        <button class="medal-btn active" data-med="All"    title="All"><img src="images/all.jpg"    alt="All"></button>
        <button class="medal-btn"        data-med="Gold"   title="Gold"><img src="images/gold.jpg"   alt="Gold"></button>
        <button class="medal-btn"        data-med="Silver" title="Silver"><img src="images/silver.jpg" alt="Silver"></button>
        <button class="medal-btn"        data-med="Bronze" title="Bronze"><img src="images/bronze.jpg" alt="Bronze"></button>
      </div>
    </section>

    <section>
      <h2 class="section-title">Medal Composition by Nation</h2>

      <div class="two-col">
        <div class="viz">
          <div id="chart6" class="chart"></div>
        </div>

        <aside class="side-text">
          <p>
            Each country's Olympic performance tells a different story. Some nations secure many podium finishes but fewer gold medals, while others achieve fewer medals overall but a high proportion of gold. This visual highlights those differences by showing the medal mix for the selected country. 
            Try comparing countries like Japan, USA, and Italy to explore distinct performance patterns.
          </p>

          <p>
            In addition, the balance between medal types can reflect the depth of a country's athletic competitiveness. 
            A nation with a high share of bronze medals may have many athletes reaching the final stages of competition, while a gold-heavy distribution suggests dominance in key events. By examining how these proportions shift from one country to another, we gain insight into not only the scale of participation, 
            but also the level of performance and specialization across sporting disciplines.
            </p>
        </aside>
      </div>
    </section>

    <section>
      <h2>Athletes by Discipline and Gender (Share %)</h2>

      <p class="chart-description">
        This chart shows the gender distribution of athletes across Olympic disciplines. 
        Each bar is split to indicate the share of male and female participants in that sport. 
        Some events, such as rhythmic gymnastics, are dominated by one gender, while others, 
        like swimming and athletics, show a relatively balanced participation.
      </p>

      <div id="chart2" class="chart"></div>


    </section>

  
    <section>
      <h2>Athlete Age Distribution by Sport</h2>

      <p class="chart-description">
        This chart compares athlete ages across Olympic sports using box plots, split by gender. 
        The box shows the middle 50% of ages with the line marking the median, while dots indicate outliers. 
        Some sports skew older (e.g., equestrian, shooting, sailing), whereas others tend to be younger 
        (e.g., skateboarding, gymnastics, swimming).
      </p>

      <div id="chart8" class="chart"></div>

    </section>

    <section>
      <h2>Medal Efficiency — Medals per Athlete</h2>
      
      <p class="chart-description">
        This scatter plot shows how efficiently each country converted athlete participation into medal wins.
        The x-axis shows the number of athletes, while the y-axis indicates total medals earned. Bubble size
        represents medal count, and color intensity reflects medals per athlete. Countries positioned higher and 
        further left achieved strong medal results relative to smaller team sizes — for example, Russia stands out 
        with a particularly high medals-to-athlete ratio.
      </p>
      
      <div id="chart9" class="chart"></div>

    </section>


  </div>

  <script>
    vegaEmbed("#chart1", "charts/chart1_medals_top20.vg.json?v=2", {actions:false}).then(res => {
      const view = res.view;

      document.getElementById("medal-controls").addEventListener("click", (e) => {
        const btn = e.target.closest(".medal-btn");
        if (!btn) return;

        // highlight active button
        document.querySelectorAll(".medal-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        // ✅ This updates the Vega parameter:
        view.signal("med", btn.dataset.med).run();
      });
    });
    vegaEmbed("#chart2", "charts/chart2_gender_by_discipline.vg.json", {actions:false});
    vegaEmbed("#chart3", "charts/chart4_map.vg.json", {actions:false}).catch(console.error);
    vegaEmbed("#chart6", "charts/chart6_medal_composition.vg.json", {actions:false});
    vegaEmbed("#chart8", "charts/chart8_age_by_sport.vg.json", {actions:false});
    vegaEmbed("#chart9", "charts/chart9_medal_efficiency.vg.json", {actions:false});
  </script>
</body>
</html>
